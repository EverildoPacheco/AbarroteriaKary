@model AbarroteriaKary.ModelsPartial.VentaPagoViewModel
@using System.Globalization
@{
    var gt = CultureInfo.GetCultureInfo("es-GT");
}
<div class="modal fade" id="modalPagoVenta" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title fw-semibold">Pago de venta</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>

            <div class="px-4"><hr class="my-2" /></div>

            <div class="modal-body pt-0 px-4 pb-3">
                <form id="form-pago-venta" class="row g-3">
                    <div class="col-12 col-md-6">
                        <label class="form-label">Método de pago</label>
                        <select id="pvMetodo" class="form-select" required>
                            <option value="">Seleccione…</option>
                            @foreach (var m in Model.Metodos)
                            {
                                <option value="@m.Value">@m.Text</option>
                            }
                        </select>
                        <div class="invalid-feedback">Seleccione un método de pago.</div>
                    </div>

                    <div class="col-12 col-md-6">
                        <label class="form-label">Total a pagar</label>
                        <input id="pvTotal" class="form-control" value="@Model.TotalPagar.ToString("C2", gt)" readonly />
                        <input id="pvTotalNumber" type="hidden" value="@Model.TotalPagar.ToString(CultureInfo.InvariantCulture)" />
                    </div>

                    <div class="col-12 col-md-6">
                        <label class="form-label">Efectivo recibido</label>
                        <input id="pvEfectivo" type="number" min="0" step="0.01" class="form-control"
                               value="@Model.TotalPagar.ToString(CultureInfo.InvariantCulture)" placeholder="Q 0.00" required />
                        <div class="invalid-feedback">Ingrese un monto válido.</div>
                    </div>

                    <div class="col-12 col-md-6">
                        <label class="form-label">Cambio</label>
                        <input id="pvCambio" class="form-control" value="Q 0.00" readonly />
                    </div>
                </form>
            </div>

            <div class="modal-footer px-4 pb-4 pt-2 border-0">
                <button type="button" class="btn btn-ak btn-ak-cancel" data-bs-dismiss="modal">
                    <i class="fa-solid fa-arrow-left-long me-1"></i> Regresar
                </button>
                <button type="button" id="pvConfirmar" class="btn btn-ak btn-ak-primary">
                    <i class="fa-solid fa-cart-shopping me-1"></i> Confirmar venta
                </button>
            </div>
        </div>
    </div>
</div>
